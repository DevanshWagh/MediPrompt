<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediPrompt ‚Äî Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .chip { display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid #e5e7eb; margin-right:6px; margin-bottom:6px; cursor:pointer; font-size:13px; }
    .chip.active{ background:#1d4ed8; color:white; border-color:#1d4ed8 }
    .pill{ padding:4px 8px; border-radius:999px; font-weight:600; font-size:12px }
    .modal-backdrop{ background: rgba(0,0,0,0.5); }
  </style>
  <script>
    /****************************************************
     * MediPrompt Frontend Demo (No backend)
     * - Enhanced symptom list
     * - Improved predictability scoring
     * - Lab-generated report previews (simulated)
     * - Sample collection booking
     * - Larger doctor database
     * NOTE: Educational demo only.
     ****************************************************/

    // --- Expanded Data ---
    const SYMPTOM_CATALOG = [
      "fever","low-grade fever","high fever","chills","night sweats","fatigue","malaise",
      "cough","dry cough","productive cough","sore throat","hoarseness","runny nose","nasal congestion",
      "shortness of breath","wheeze","chest pain","chest tightness","palpitations",
      "headache","migraine","dizziness","loss of consciousness","seizures",
      "nausea","vomiting","diarrhea","constipation","abdominal pain","bloating",
      "loss of appetite","weight loss","weight gain","joint pain","muscle ache","back pain",
      "rash","itching","skin redness","blisters","swelling","eye redness","blurred vision",
      "urinary frequency","burning urination","blood in urine","testicular pain",
      "loss of taste","loss of smell","anxiety","depression","insomnia"
    ];

    // More diseases with richer keywords
    const DISEASES = [
      { name: "Common Cold", specialty: "General Medicine", keywords: ["runny nose","sore throat","sneezing","nasal congestion","mild fever","cough"], tests: ["Symptomatic evaluation"], threshold: 1, notes: "Usually self-limiting." },
      { name: "Seasonal Influenza", specialty: "General Medicine", keywords: ["high fever","headache","muscle ache","fatigue","chills","cough","sore throat"], tests: ["Rapid Influenza Test","CBC"], threshold: 2, notes: "May need physician review." },
      { name: "COVID-19", specialty: "General Medicine", keywords: ["fever","dry cough","loss of taste","loss of smell","shortness of breath","fatigue"], tests: ["Rapid Antigen","RT-PCR"], threshold: 2, notes: "Follow local public health guidance." },
      { name: "Pneumonia", specialty: "Pulmonology", keywords: ["fever","productive cough","shortness of breath","chest pain","chills","night sweats"], tests: ["Chest X-ray","CBC","Sputum Culture"], threshold: 2, notes: "Seek urgent care if severe." },
      { name: "Gastroenteritis", specialty: "Gastroenterology", keywords: ["diarrhea","vomiting","abdominal pain","nausea","fever"], tests: ["Stool exam","Electrolytes","CBC"], threshold: 1, notes: "Hydration is important." },
      { name: "UTI", specialty: "Urology", keywords: ["burning urination","urinary frequency","blood in urine","lower abdominal pain"], tests: ["Urine Routine","Urine Culture"], threshold: 1, notes: "Common; antibiotics often needed." },
      { name: "Dermatitis (Allergic)", specialty: "Dermatology", keywords: ["rash","itching","redness","swelling"], tests: ["Clinical exam","Allergy panel"], threshold: 1, notes: "Avoid triggers." },
      { name: "Migraine", specialty: "Neurology", keywords: ["headache","nausea","vomiting","visual aura","photophobia"], tests: ["Clinical evaluation"], threshold: 1, notes: "Neurology consult for recurrent episodes." },
      { name: "Hypertension (uncontrolled)", specialty: "Cardiology", keywords: ["palpitations","headache","dizziness","chest pain"], tests: ["BP monitoring","ECG","Blood tests"], threshold: 1, notes: "Chronic care needed." },
      { name: "Diabetes (possible)", specialty: "Endocrinology", keywords: ["weight loss","frequent urination","fatigue","blurred vision"], tests: ["Fasting Blood Sugar","HbA1c"], threshold: 1, notes: "Screening recommended if suspected." }
    ];

    const LABS = [
      { id:1, name: "HealthCare Path Labs", address: "MG Road, Pune", phone: "+91 90210 12345" },
      { id:2, name: "MedTrust Diagnostics", address: "Andheri East, Mumbai", phone: "+91 98190 45678" },
      { id:3, name: "CityCare Pathology", address: "Baner, Pune", phone: "+91 99220 67890" }
    ];

    // Expanded doctors
    const DOCTORS = [
      { name: "Dr. Anjali Mehra", specialty: "General Medicine", phone: "+91 98765 43210", email: "anjali.mehra@example.com", city: "Pune" },
      { name: "Dr. Raghav Sharma", specialty: "Pulmonology", phone: "+91 99876 11223", email: "r.sharma@example.com", city: "Mumbai" },
      { name: "Dr. Kavita Nair", specialty: "Dermatology", phone: "+91 90909 22334", email: "k.nair@example.com", city: "Pune" },
      { name: "Dr. Suresh Iyer", specialty: "Urology", phone: "+91 90000 77889", email: "s.iyer@example.com", city: "Mumbai" },
      { name: "Dr. Priya Desai", specialty: "Gastroenterology", phone: "+91 91234 55667", email: "p.desai@example.com", city: "Pune" },
      { name: "Dr. Mehul Jain", specialty: "Cardiology", phone: "+91 92345 66778", email: "m.jain@example.com", city: "Pune" },
      { name: "Dr. Nidhi Rao", specialty: "Neurology", phone: "+91 93456 77889", email: "n.rao@example.com", city: "Mumbai" },
      { name: "Dr. Arvind Kulkarni", specialty: "Pediatrics", phone: "+91 94567 88990", email: "a.kulkarni@example.com", city: "Pune" },
      { name: "Dr. Reema Singh", specialty: "Orthopedics", phone: "+91 95678 99001", email: "r.singh@example.com", city: "Mumbai" },
      { name: "Dr. Vinod Kapoor", specialty: "Endocrinology", phone: "+91 96789 00112", email: "v.kapoor@example.com", city: "Pune" }
    ];

    // --- State ---
    let selectedSymptoms = new Set();
    let currentPrediction = null;

    // Utilities
    const normalize = s => s.toLowerCase().trim();

    // Improved scoring: match exact keywords and partial token overlaps; weight exact matches higher
    function scoreDisease(symSet){
      const input = Array.from(symSet).map(normalize);
      return DISEASES.map(d=>{
        let exact=0, partial=0;
        d.keywords.forEach(k=>{
          const nk = normalize(k);
          if(input.includes(nk)) exact++;
          else if(input.some(i=> i.includes(nk) || nk.includes(i))) partial++;
        });
        // score composition: exact*2 + partial*1, normalized by keyword count
        const raw = exact*2 + partial;
        const score = raw / Math.max(1, d.keywords.length);
        return { disease:d, score, exact, partial };
      }).sort((a,b)=>b.score - a.score);
    }

    // Render symptom chips
    function renderSymptomChips(){
      const wrap = document.getElementById('symptom-chips');
      wrap.innerHTML='';
      SYMPTOM_CATALOG.forEach(sym=>{
        const btn = document.createElement('button');
        btn.className='chip';
        btn.textContent = sym;
        btn.addEventListener('click', ()=>{
          if(selectedSymptoms.has(sym)){ selectedSymptoms.delete(sym); btn.classList.remove('active'); }
          else { selectedSymptoms.add(sym); btn.classList.add('active'); }
        });
        wrap.appendChild(btn);
      });
    }

    // Render labs
    function renderLabList(){
      const list = document.getElementById('lab-list'); list.innerHTML='';
      LABS.forEach(lab=>{
        const li = document.createElement('li');
        li.className = 'flex items-start justify-between p-4 border rounded-lg mb-3 bg-white';
        li.innerHTML = `<div><p class="font-semibold text-gray-800">${lab.name}</p><p class="text-sm text-gray-600">${lab.address}</p><p class="text-sm text-gray-600">üìû ${lab.phone}</p></div><div class="space-y-2"><button class='bg-green-600 text-white px-4 py-2 rounded-lg book-test'>Book Test</button><button class='bg-indigo-600 text-white px-4 py-2 rounded-lg book-pickup'>Book Sample Pickup</button></div>`;
        li.querySelector('.book-test').addEventListener('click', ()=>bookTest(lab));
        li.querySelector('.book-pickup').addEventListener('click', ()=>openPickupModal(lab));
        list.appendChild(li);
      });
    }

    function openPickupModal(lab){
      document.getElementById('pickup-modal').classList.remove('hidden');
      document.getElementById('pickup-lab-name').textContent = lab.name;
      document.getElementById('pickup-lab-id').value = lab.id;
    }

    function closePickupModal(){ document.getElementById('pickup-modal').classList.add('hidden'); }

    function bookSamplePickup(e){
      e.preventDefault();
      const labId = +document.getElementById('pickup-lab-id').value;
      const date = document.getElementById('pickup-date').value;
      const time = document.getElementById('pickup-time').value;
      if(!date||!time){ alert('Select date and time for pickup'); return; }
      const lab = LABS.find(l=>l.id===labId);
      const msg = document.getElementById('lab-confirm');
      msg.classList.remove('hidden');
      msg.textContent = `‚úÖ Sample pickup scheduled with ${lab.name} on ${date} at ${time}. (Demo)`;
      closePickupModal();
      updateProgress(3);
      // store demo
      localStorage.setItem('mediprompt_last_pickup', JSON.stringify({lab:lab.name,date,time}));
    }

    // Simulate booking a test: generates a demo lab report after short delay and auto-attaches it
    function bookTest(lab){
      updateProgress(2);
      const msg = document.getElementById('lab-confirm');
      msg.classList.remove('hidden');
      msg.textContent = `‚úÖ Test booking request sent to ${lab.name}. The lab will upload the report here in a few seconds (simulated).`;
      // simulate lab generating a report after 2.5s
      setTimeout(()=>{
        const reportContent = `MediPrompt Demo Lab Report\nLab: ${lab.name}\nPatient: Demo User\nDate: ${new Date().toLocaleString()}\n\nFindings:\n- Test: CBC -> Within reference range\n- Test: CRP -> Slightly elevated\n\nImpression: Findings suggest mild inflammatory process. Correlate clinically.`;
        const blob = new Blob([reportContent], {type:'text/plain'});
        const url = URL.createObjectURL(blob);
        // create report card
        const reports = document.getElementById('reports-list');
        const card = document.createElement('div');
        card.className='p-3 bg-white border rounded mb-3 flex justify-between items-start';
        card.innerHTML = `<div><p class='font-semibold'>${lab.name} ‚Äî Demo Report</p><p class='text-sm text-gray-600'>${new Date().toLocaleString()}</p></div><div class='space-x-2'><a class='px-3 py-2 bg-indigo-600 text-white rounded' href='${url}' download='mediprompt_report.txt'>Download</a><button class='px-3 py-2 border rounded view-report'>View</button></div>`;
        card.querySelector('.view-report').addEventListener('click', ()=>{
          // open preview iframe
          document.getElementById('report-preview-iframe').src = url;
          document.getElementById('report-preview').classList.remove('hidden');
          updateProgress(3);
        });
        reports.prepend(card);
        // show notice
        const rptStatus = document.getElementById('report-status');
        rptStatus.classList.remove('hidden');
        rptStatus.textContent = `Report received from ${lab.name} (demo). Click View to preview.`;
      }, 2500);
    }

    // Handle user upload (preview if possible)
    function handleReportUpload(){
      const file = document.getElementById('report-file').files[0];
      if(!file){ alert('Choose a file'); return; }
      const url = URL.createObjectURL(file);
      const reports = document.getElementById('reports-list');
      const card = document.createElement('div');
      card.className='p-3 bg-white border rounded mb-3 flex justify-between items-start';
      card.innerHTML = `<div><p class='font-semibold'>Uploaded ‚Äî ${file.name}</p><p class='text-sm text-gray-600'>${new Date().toLocaleString()}</p></div><div class='space-x-2'><a class='px-3 py-2 bg-indigo-600 text-white rounded' href='${url}' download='${file.name}'>Download</a><button class='px-3 py-2 border rounded view-report'>View</button></div>`;
      card.querySelector('.view-report').addEventListener('click', ()=>{
        const iframe = document.getElementById('report-preview-iframe');
        // if pdf or image, set directly; else show text inside iframe
        iframe.src = url;
        document.getElementById('report-preview').classList.remove('hidden');
        updateProgress(3);
      });
      reports.prepend(card);
      document.getElementById('report-status').classList.remove('hidden');
      document.getElementById('report-status').textContent = `Uploaded: ${file.name}`;
    }

    // Prediction handler
    function handleSymptomAnalyze(e){
      e && e.preventDefault();
      // parse comma separated input
      const freeText = document.getElementById('symptoms-free').value
        .split(',')
        .map(s=>s.trim())
        .filter(Boolean);
      freeText.forEach(s=> selectedSymptoms.add(s));
      if(selectedSymptoms.size===0){ alert('Please select or enter at least one symptom (separate with commas).'); return; }
      const results = scoreDisease(selectedSymptoms);
      const top = results.slice(0,4);
      const out = document.getElementById('predictions'); out.innerHTML='';
      top.forEach((r, idx)=>{
        const conf = Math.min(99, Math.round(r.score*40 + r.exact*10));
        const div = document.createElement('div');
        div.className='bg-white p-4 rounded-xl border mb-3';
        div.innerHTML = `<div class='flex justify-between items-center'><h4 class='text-lg font-semibold'>${r.disease.name}</h4><span class='pill ${idx===0? 'bg-blue-100 text-blue-800':'bg-gray-100 text-gray-800'}'>~${conf}%</span></div><p class='text-sm text-gray-600 mt-1'>Matched keywords: ${r.exact>0? r.disease.keywords.filter(k=> Array.from(selectedSymptoms).some(s=> normalize(s).includes(normalize(k)) || normalize(k).includes(normalize(s)))).join(', '): '‚Äî'}</p><p class='text-sm text-gray-700 mt-2'><strong>Suggested tests:</strong> ${r.disease.tests.join(', ')}</p><p class='text-sm text-gray-700 mt-1'><strong>Specialty:</strong> ${r.disease.specialty}</p><p class='text-xs text-gray-500 mt-2'>Note: ${r.disease.notes}</p>`;
        out.appendChild(div);
      });

      // set current prediction to top match
      currentPrediction = top[0] ? top[0].disease : null;
      // reveal panels
      document.getElementById('results').classList.remove('hidden');
      document.getElementById('labs-panel').classList.remove('hidden');
      document.getElementById('reports-panel').classList.remove('hidden');
      document.getElementById('doctor-panel').classList.remove('hidden');
      renderLabList();
      renderDoctorsForSpecialty(currentPrediction? currentPrediction.specialty : 'Any');
      updateProgress(2);
      document.getElementById('results').scrollIntoView({behavior:'smooth'});
    }

    function renderDoctorsForSpecialty(spec){
      const sel = document.getElementById('doctor-select'); sel.innerHTML = '<option value="">-- Select Doctor --</option>';
      DOCTORS.filter(d=> spec==='Any' || d.specialty===spec).forEach(d=>{
        const opt = document.createElement('option'); opt.value = d.name; opt.textContent = `${d.name} ‚Äî ${d.specialty} (${d.city}) ‚Äî ${d.phone}`; opt.dataset.email=d.email; sel.appendChild(opt);
      });
    }

    // Appointment confirm for doctors
    function handleAppointmentConfirm(e){
      e.preventDefault();
      const doc = document.getElementById('doctor-select').value;
      const date = document.getElementById('appointment-date').value;
      const time = document.getElementById('appointment-time').value;
      if(!doc||!date||!time){ alert('Choose doctor, date and time'); return; }
      const detail = { doctor:doc, date, time, disease: currentPrediction? currentPrediction.name:'General' };
      localStorage.setItem('mediprompt_appointment', JSON.stringify(detail));
      document.getElementById('appointment-confirm').classList.remove('hidden');
      document.getElementById('appointment-details').textContent = `‚úÖ Booked: ${doc} on ${date} at ${time}.`;
      updateProgress(4);
    }

    function updateProgress(step){
      document.querySelectorAll('.progress-step').forEach((el,idx)=>{
        if(idx < step) { el.classList.add('bg-blue-600','text-white'); el.classList.remove('bg-gray-200','text-gray-600'); }
        else { el.classList.add('bg-gray-200','text-gray-600'); el.classList.remove('bg-blue-600','text-white'); }
      });
    }

    function init(){
      renderSymptomChips(); renderLabList(); renderDoctorsForSpecialty('Any');
      // restore state
      const appt = localStorage.getItem('mediprompt_appointment'); if(appt){ const d=JSON.parse(appt); document.getElementById('appointment-confirm').classList.remove('hidden'); document.getElementById('appointment-details').textContent = `Existing booking: ${d.doctor} on ${d.date} at ${d.time}`; }
      const lastpickup = localStorage.getItem('mediprompt_last_pickup'); if(lastpickup){ document.getElementById('lab-confirm').classList.remove('hidden'); document.getElementById('lab-confirm').textContent = `Last pickup (demo): ${JSON.parse(lastpickup).lab}`; }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</head>
<body class="bg-gray-50 font-sans">
  <!-- Navbar -->
  <header class="flex justify-between items-center py-4 px-8 bg-white shadow">
    <h1 class="text-2xl font-bold text-blue-600">MediPrompt</h1>
    <nav class="space-x-6">
      <a href="#" class="text-gray-700 hover:text-blue-600">Home</a>
      <a href="#features" class="text-gray-700 hover:text-blue-600">Features</a>
      <a href="#demo" class="text-gray-700 hover:text-blue-600">Live Demo</a>
      <a href="#contact" class="text-gray-700 hover:text-blue-600">Contact</a>
    </nav>
    <button class="border border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white">Login / Sign Up</button>
  </header>

  <!-- Progress Tracker -->
  <section class="bg-gray-100 py-6">
    <div class="max-w-5xl mx-auto grid grid-cols-4 gap-3">
      <div class="progress-step bg-blue-600 text-white text-center py-2 rounded-lg">1. Symptoms</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">2. Tests</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">3. Reports</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">4. Doctor</div>
    </div>
  </section>

  <!-- Hero -->
  <section class="flex flex-col md:flex-row items-center justify-between px-8 py-12 bg-white">
    <div class="max-w-2xl">
      <h2 class="text-4xl font-bold text-gray-900 mb-3">Your AI Health Companion</h2>
      <p class="text-gray-700 mb-6">Tell us your symptoms (separate with commas). We‚Äôll suggest possible conditions, tests, connect you to a lab, and help you book a doctor ‚Äî end to end demo.</p>
      <a href="#demo" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">Try the Live Demo</a>
    </div>
    <img src="https://cdn-icons-png.flaticon.com/512/387/387561.png" alt="Doctor" class="w-64 mt-8 md:mt-0" />
  </section>

  <!-- Features -->
  <section id="features" class="px-8 py-12 bg-gray-50">
    <div class="grid md:grid-cols-4 gap-6 text-center">
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Symptom Checker</h3><p class="text-gray-600 mt-2">Comma-separated input and chip selection.</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Test Suggestions</h3><p class="text-gray-600 mt-2">Contextual tests shown for each condition.</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Pathology Labs</h3><p class="text-gray-600 mt-2">Book tests and sample pickup; lab uploads reports (simulated).</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Doctor Booking</h3><p class="text-gray-600 mt-2">Many sample doctors across specialties.</p></div>
    </div>
  </section>

  <!-- Live Demo -->
  <section id="demo" class="px-8 py-12">
    <div class="max-w-5xl mx-auto bg-white rounded-xl shadow p-6 border">
      <h3 class="text-2xl font-semibold text-gray-900 mb-2">1) Enter Symptoms</h3>
      <p class="text-sm text-gray-600 mb-4">Select from common symptoms or type your own, separated by commas (e.g., fever, cough, headache)</p>
      <div id="symptom-chips" class="mb-3"></div>
      <input id="symptoms-free" type="text" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" placeholder="e.g., fever, cough, loss of taste" />
      <div class="mt-4 flex gap-3">
        <button onclick="handleSymptomAnalyze(event)" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700">Analyze Symptoms</button>
        <button onclick="(function(){document.getElementById('symptoms-free').value='fever,cough,shortness of breath'; handleSymptomAnalyze();})()" class="bg-gray-200 px-4 py-2 rounded">Use sample</button>
      </div>
      <div class="mt-4 text-xs text-gray-600 bg-yellow-50 border border-yellow-200 p-3 rounded">‚ö†Ô∏è Educational demo only. Not a diagnostic tool.</div>
    </div>

    <!-- Results -->
    <div id="results" class="max-w-5xl mx-auto mt-8 hidden">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="bg-white rounded-xl shadow p-6 border">
          <h3 class="text-2xl font-semibold text-gray-900 mb-2">2) Predicted Conditions & Suggested Tests</h3>
          <div id="predictions" class="space-y-3"></div>
        </div>

        <!-- Labs -->
        <div id="labs-panel" class="bg-white rounded-xl shadow p-6 border hidden">
          <h3 class="text-2xl font-semibold text-gray-900 mb-2">Book a Pathology Lab</h3>
          <ul id="lab-list" class="mt-2"></ul>
          <p id="lab-confirm" class="hidden text-sm mt-2 text-green-700 bg-green-50 border border-green-200 p-2 rounded"></p>
        </div>
      </div>

      <!-- Reports upload -->
      <div id="reports-panel" class="bg-white rounded-xl shadow p-6 border mt-6 hidden">
        <h3 class="text-2xl font-semibold text-gray-900 mb-2">3) Reports</h3>
        <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
          <input id="report-file" type="file" class="border p-2 rounded" />
          <button onclick="handleReportUpload()" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Upload Report</button>
        </div>
        <p id="report-status" class="hidden text-sm text-indigo-700"></p>
        <div id="reports-list" class="mt-3"></div>

        <div id="report-preview" class="hidden mt-4">
          <h4 class="font-semibold">Report Preview</h4>
          <iframe id="report-preview-iframe" style="width:100%;height:360px;border:1px solid #e5e7eb;border-radius:8px;margin-top:8px"></iframe>
        </div>
      </div>

      <!-- Doctor booking -->
      <div id="doctor-panel" class="bg-white rounded-xl shadow p-6 border mt-6 hidden">
        <h3 class="text-2xl font-semibold text-gray-900 mb-2">4) Book a Doctor</h3>
        <form onsubmit="handleAppointmentConfirm(event)" class="grid md:grid-cols-3 gap-4">
          <div class="md:col-span-3">
            <label class="block text-sm font-semibold mb-1">Doctor (specialty auto‚Äësuggested)</label>
            <select id="doctor-select" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300"></select>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-1">Date</label>
            <input id="appointment-date" type="date" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" />
          </div>
          <div>
            <label class="block text-sm font-semibold mb-1">Time</label>
            <select id="appointment-time" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300"><option value="">-- Choose a time slot --</option><option>09:30 AM</option><option>10:30 AM</option><option>12:00 PM</option><option>02:30 PM</option><option>05:00 PM</option></select>
          </div>
          <div class="md:col-span-3 flex items-end">
            <button type="submit" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700">Confirm Appointment</button>
          </div>
        </form>
        <div id="appointment-confirm" class="hidden mt-4 bg-green-50 text-green-800 p-3 rounded border border-green-200"><p class="font-semibold">Appointment Confirmed</p><p id="appointment-details"></p></div>
      </div>
    </div>
  </section>

  <!-- Pickup Modal -->
  <div id="pickup-modal" class="hidden fixed inset-0 flex items-center justify-center z-50">
    <div class="modal-backdrop absolute inset-0"></div>
    <div class="relative bg-white rounded-lg shadow-lg z-50 p-6 w-full max-w-md">
      <h4 class="text-lg font-semibold mb-2">Book Sample Pickup ‚Äî <span id="pickup-lab-name"></span></h4>
      <form onsubmit="bookSamplePickup(event)">
        <input id="pickup-lab-id" type="hidden" />
        <label class="block text-sm font-medium">Date</label>
        <input id="pickup-date" type="date" class="w-full p-2 border rounded mb-3" />
        <label class="block text-sm font-medium">Time slot</label>
        <select id="pickup-time" class="w-full p-2 border rounded mb-4"><option value="">-- Choose --</option><option>09:00 AM - 11:00 AM</option><option>11:00 AM - 01:00 PM</option><option>02:00 PM - 04:00 PM</option><option>04:00 PM - 06:00 PM</option></select>
        <div class="flex gap-3 justify-end"><button type="button" onclick="closePickupModal()" class="px-4 py-2 border rounded">Cancel</button><button class="px-4 py-2 bg-green-600 text-white rounded">Confirm Pickup</button></div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-100 py-6 px-8 text-center text-gray-600"> <p>&copy; 2025 MediPrompt (Demo). All rights reserved.</p></footer>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediPrompt ‚Äî Demo</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .chip { display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid #e5e7eb; margin-right:6px; margin-bottom:6px; cursor:pointer; font-size:13px; }
    .chip.active{ background:#1d4ed8; color:white; border-color:#1d4ed8 }
    .pill{ padding:4px 8px; border-radius:999px; font-weight:600; font-size:12px }
    .modal-backdrop{ background: rgba(0,0,0,0.5); }
  </style>
  <script>
    /****************************************************
     * MediPrompt Frontend Demo (No backend)
     * - Enhanced symptom list
     * - Improved predictability scoring
     * - Lab-generated report previews (simulated)
     * - Sample collection booking
     * - Larger doctor database
     * NOTE: Educational demo only.
     ****************************************************/

    // --- Expanded Data ---
    const SYMPTOM_CATALOG = [
      "fever","low-grade fever","high fever","chills","night sweats","fatigue","malaise",
      "cough","dry cough","productive cough","sore throat","hoarseness","runny nose","nasal congestion",
      "shortness of breath","wheeze","chest pain","chest tightness","palpitations",
      "headache","migraine","dizziness","loss of consciousness","seizures",
      "nausea","vomiting","diarrhea","constipation","abdominal pain","bloating",
      "loss of appetite","weight loss","weight gain","joint pain","muscle ache","back pain",
      "rash","itching","skin redness","blisters","swelling","eye redness","blurred vision",
      "urinary frequency","burning urination","blood in urine","testicular pain",
      "loss of taste","loss of smell","anxiety","depression","insomnia"
    ];

    // More diseases with richer keywords
    const DISEASES = [
      { name: "Common Cold", specialty: "General Medicine", keywords: ["runny nose","sore throat","sneezing","nasal congestion","mild fever","cough"], tests: ["Symptomatic evaluation"], threshold: 1, notes: "Usually self-limiting." },
      { name: "Seasonal Influenza", specialty: "General Medicine", keywords: ["high fever","headache","muscle ache","fatigue","chills","cough","sore throat"], tests: ["Rapid Influenza Test","CBC"], threshold: 2, notes: "May need physician review." },
      { name: "COVID-19", specialty: "General Medicine", keywords: ["fever","dry cough","loss of taste","loss of smell","shortness of breath","fatigue"], tests: ["Rapid Antigen","RT-PCR"], threshold: 2, notes: "Follow local public health guidance." },
      { name: "Pneumonia", specialty: "Pulmonology", keywords: ["fever","productive cough","shortness of breath","chest pain","chills","night sweats"], tests: ["Chest X-ray","CBC","Sputum Culture"], threshold: 2, notes: "Seek urgent care if severe." },
      { name: "Gastroenteritis", specialty: "Gastroenterology", keywords: ["diarrhea","vomiting","abdominal pain","nausea","fever"], tests: ["Stool exam","Electrolytes","CBC"], threshold: 1, notes: "Hydration is important." },
      { name: "UTI", specialty: "Urology", keywords: ["burning urination","urinary frequency","blood in urine","lower abdominal pain"], tests: ["Urine Routine","Urine Culture"], threshold: 1, notes: "Common; antibiotics often needed." },
      { name: "Dermatitis (Allergic)", specialty: "Dermatology", keywords: ["rash","itching","redness","swelling"], tests: ["Clinical exam","Allergy panel"], threshold: 1, notes: "Avoid triggers." },
      { name: "Migraine", specialty: "Neurology", keywords: ["headache","nausea","vomiting","visual aura","photophobia"], tests: ["Clinical evaluation"], threshold: 1, notes: "Neurology consult for recurrent episodes." },
      { name: "Hypertension (uncontrolled)", specialty: "Cardiology", keywords: ["palpitations","headache","dizziness","chest pain"], tests: ["BP monitoring","ECG","Blood tests"], threshold: 1, notes: "Chronic care needed." },
      { name: "Diabetes (possible)", specialty: "Endocrinology", keywords: ["weight loss","frequent urination","fatigue","blurred vision"], tests: ["Fasting Blood Sugar","HbA1c"], threshold: 1, notes: "Screening recommended if suspected." }
    ];

    const LABS = [
      { id:1, name: "HealthCare Path Labs", address: "MG Road, Pune", phone: "+91 90210 12345" },
      { id:2, name: "MedTrust Diagnostics", address: "Andheri East, Mumbai", phone: "+91 98190 45678" },
      { id:3, name: "CityCare Pathology", address: "Baner, Pune", phone: "+91 99220 67890" }
    ];

    // Expanded doctors
    const DOCTORS = [
      { name: "Dr. Anjali Mehra", specialty: "General Medicine", phone: "+91 98765 43210", email: "anjali.mehra@example.com", city: "Pune" },
      { name: "Dr. Raghav Sharma", specialty: "Pulmonology", phone: "+91 99876 11223", email: "r.sharma@example.com", city: "Mumbai" },
      { name: "Dr. Kavita Nair", specialty: "Dermatology", phone: "+91 90909 22334", email: "k.nair@example.com", city: "Pune" },
      { name: "Dr. Suresh Iyer", specialty: "Urology", phone: "+91 90000 77889", email: "s.iyer@example.com", city: "Mumbai" },
      { name: "Dr. Priya Desai", specialty: "Gastroenterology", phone: "+91 91234 55667", email: "p.desai@example.com", city: "Pune" },
      { name: "Dr. Mehul Jain", specialty: "Cardiology", phone: "+91 92345 66778", email: "m.jain@example.com", city: "Pune" },
      { name: "Dr. Nidhi Rao", specialty: "Neurology", phone: "+91 93456 77889", email: "n.rao@example.com", city: "Mumbai" },
      { name: "Dr. Arvind Kulkarni", specialty: "Pediatrics", phone: "+91 94567 88990", email: "a.kulkarni@example.com", city: "Pune" },
      { name: "Dr. Reema Singh", specialty: "Orthopedics", phone: "+91 95678 99001", email: "r.singh@example.com", city: "Mumbai" },
      { name: "Dr. Vinod Kapoor", specialty: "Endocrinology", phone: "+91 96789 00112", email: "v.kapoor@example.com", city: "Pune" }
    ];

    // --- State ---
    let selectedSymptoms = new Set();
    let currentPrediction = null;

    // Utilities
    const normalize = s => s.toLowerCase().trim();

    // Improved scoring: match exact keywords and partial token overlaps; weight exact matches higher
    function scoreDisease(symSet){
      const input = Array.from(symSet).map(normalize);
      return DISEASES.map(d=>{
        let exact=0, partial=0;
        d.keywords.forEach(k=>{
          const nk = normalize(k);
          if(input.includes(nk)) exact++;
          else if(input.some(i=> i.includes(nk) || nk.includes(i))) partial++;
        });
        // score composition: exact*2 + partial*1, normalized by keyword count
        const raw = exact*2 + partial;
        const score = raw / Math.max(1, d.keywords.length);
        return { disease:d, score, exact, partial };
      }).sort((a,b)=>b.score - a.score);
    }

    // Render symptom chips
    function renderSymptomChips(){
      const wrap = document.getElementById('symptom-chips');
      wrap.innerHTML='';
      SYMPTOM_CATALOG.forEach(sym=>{
        const btn = document.createElement('button');
        btn.className='chip';
        btn.textContent = sym;
        btn.addEventListener('click', ()=>{
          if(selectedSymptoms.has(sym)){ selectedSymptoms.delete(sym); btn.classList.remove('active'); }
          else { selectedSymptoms.add(sym); btn.classList.add('active'); }
        });
        wrap.appendChild(btn);
      });
    }

    // Render labs
    function renderLabList(){
      const list = document.getElementById('lab-list'); list.innerHTML='';
      LABS.forEach(lab=>{
        const li = document.createElement('li');
        li.className = 'flex items-start justify-between p-4 border rounded-lg mb-3 bg-white';
        li.innerHTML = `<div><p class="font-semibold text-gray-800">${lab.name}</p><p class="text-sm text-gray-600">${lab.address}</p><p class="text-sm text-gray-600">üìû ${lab.phone}</p></div><div class="space-y-2"><button class='bg-green-600 text-white px-4 py-2 rounded-lg book-test'>Book Test</button><button class='bg-indigo-600 text-white px-4 py-2 rounded-lg book-pickup'>Book Sample Pickup</button></div>`;
        li.querySelector('.book-test').addEventListener('click', ()=>bookTest(lab));
        li.querySelector('.book-pickup').addEventListener('click', ()=>openPickupModal(lab));
        list.appendChild(li);
      });
    }

    function openPickupModal(lab){
      document.getElementById('pickup-modal').classList.remove('hidden');
      document.getElementById('pickup-lab-name').textContent = lab.name;
      document.getElementById('pickup-lab-id').value = lab.id;
    }

    function closePickupModal(){ document.getElementById('pickup-modal').classList.add('hidden'); }

    function bookSamplePickup(e){
      e.preventDefault();
      const labId = +document.getElementById('pickup-lab-id').value;
      const date = document.getElementById('pickup-date').value;
      const time = document.getElementById('pickup-time').value;
      if(!date||!time){ alert('Select date and time for pickup'); return; }
      const lab = LABS.find(l=>l.id===labId);
      const msg = document.getElementById('lab-confirm');
      msg.classList.remove('hidden');
      msg.textContent = `‚úÖ Sample pickup scheduled with ${lab.name} on ${date} at ${time}. (Demo)`;
      closePickupModal();
      updateProgress(3);
      // store demo
      localStorage.setItem('mediprompt_last_pickup', JSON.stringify({lab:lab.name,date,time}));
    }

    // Simulate booking a test: generates a demo lab report after short delay and auto-attaches it
    function bookTest(lab){
      updateProgress(2);
      const msg = document.getElementById('lab-confirm');
      msg.classList.remove('hidden');
      msg.textContent = `‚úÖ Test booking request sent to ${lab.name}. The lab will upload the report here in a few seconds (simulated).`;
      // simulate lab generating a report after 2.5s
      setTimeout(()=>{
        const reportContent = `MediPrompt Demo Lab Report\nLab: ${lab.name}\nPatient: Demo User\nDate: ${new Date().toLocaleString()}\n\nFindings:\n- Test: CBC -> Within reference range\n- Test: CRP -> Slightly elevated\n\nImpression: Findings suggest mild inflammatory process. Correlate clinically.`;
        const blob = new Blob([reportContent], {type:'text/plain'});
        const url = URL.createObjectURL(blob);
        // create report card
        const reports = document.getElementById('reports-list');
        const card = document.createElement('div');
        card.className='p-3 bg-white border rounded mb-3 flex justify-between items-start';
        card.innerHTML = `<div><p class='font-semibold'>${lab.name} ‚Äî Demo Report</p><p class='text-sm text-gray-600'>${new Date().toLocaleString()}</p></div><div class='space-x-2'><a class='px-3 py-2 bg-indigo-600 text-white rounded' href='${url}' download='mediprompt_report.txt'>Download</a><button class='px-3 py-2 border rounded view-report'>View</button></div>`;
        card.querySelector('.view-report').addEventListener('click', ()=>{
          // open preview iframe
          document.getElementById('report-preview-iframe').src = url;
          document.getElementById('report-preview').classList.remove('hidden');
          updateProgress(3);
        });
        reports.prepend(card);
        // show notice
        const rptStatus = document.getElementById('report-status');
        rptStatus.classList.remove('hidden');
        rptStatus.textContent = `Report received from ${lab.name} (demo). Click View to preview.`;
      }, 2500);
    }

    // Handle user upload (preview if possible)
    function handleReportUpload(){
      const file = document.getElementById('report-file').files[0];
      if(!file){ alert('Choose a file'); return; }
      const url = URL.createObjectURL(file);
      const reports = document.getElementById('reports-list');
      const card = document.createElement('div');
      card.className='p-3 bg-white border rounded mb-3 flex justify-between items-start';
      card.innerHTML = `<div><p class='font-semibold'>Uploaded ‚Äî ${file.name}</p><p class='text-sm text-gray-600'>${new Date().toLocaleString()}</p></div><div class='space-x-2'><a class='px-3 py-2 bg-indigo-600 text-white rounded' href='${url}' download='${file.name}'>Download</a><button class='px-3 py-2 border rounded view-report'>View</button></div>`;
      card.querySelector('.view-report').addEventListener('click', ()=>{
        const iframe = document.getElementById('report-preview-iframe');
        // if pdf or image, set directly; else show text inside iframe
        iframe.src = url;
        document.getElementById('report-preview').classList.remove('hidden');
        updateProgress(3);
      });
      reports.prepend(card);
      document.getElementById('report-status').classList.remove('hidden');
      document.getElementById('report-status').textContent = `Uploaded: ${file.name}`;
    }

    // Prediction handler
    function handleSymptomAnalyze(e){
      e && e.preventDefault();
      // parse comma separated input
      const freeText = document.getElementById('symptoms-free').value
        .split(',')
        .map(s=>s.trim())
        .filter(Boolean);
      freeText.forEach(s=> selectedSymptoms.add(s));
      if(selectedSymptoms.size===0){ alert('Please select or enter at least one symptom (separate with commas).'); return; }
      const results = scoreDisease(selectedSymptoms);
      const top = results.slice(0,4);
      const out = document.getElementById('predictions'); out.innerHTML='';
      top.forEach((r, idx)=>{
        const conf = Math.min(99, Math.round(r.score*40 + r.exact*10));
        const div = document.createElement('div');
        div.className='bg-white p-4 rounded-xl border mb-3';
        div.innerHTML = `<div class='flex justify-between items-center'><h4 class='text-lg font-semibold'>${r.disease.name}</h4><span class='pill ${idx===0? 'bg-blue-100 text-blue-800':'bg-gray-100 text-gray-800'}'>~${conf}%</span></div><p class='text-sm text-gray-600 mt-1'>Matched keywords: ${r.exact>0? r.disease.keywords.filter(k=> Array.from(selectedSymptoms).some(s=> normalize(s).includes(normalize(k)) || normalize(k).includes(normalize(s)))).join(', '): '‚Äî'}</p><p class='text-sm text-gray-700 mt-2'><strong>Suggested tests:</strong> ${r.disease.tests.join(', ')}</p><p class='text-sm text-gray-700 mt-1'><strong>Specialty:</strong> ${r.disease.specialty}</p><p class='text-xs text-gray-500 mt-2'>Note: ${r.disease.notes}</p>`;
        out.appendChild(div);
      });

      // set current prediction to top match
      currentPrediction = top[0] ? top[0].disease : null;
      // reveal panels
      document.getElementById('results').classList.remove('hidden');
      document.getElementById('labs-panel').classList.remove('hidden');
      document.getElementById('reports-panel').classList.remove('hidden');
      document.getElementById('doctor-panel').classList.remove('hidden');
      renderLabList();
      renderDoctorsForSpecialty(currentPrediction? currentPrediction.specialty : 'Any');
      updateProgress(2);
      document.getElementById('results').scrollIntoView({behavior:'smooth'});
    }

    function renderDoctorsForSpecialty(spec){
      const sel = document.getElementById('doctor-select'); sel.innerHTML = '<option value="">-- Select Doctor --</option>';
      DOCTORS.filter(d=> spec==='Any' || d.specialty===spec).forEach(d=>{
        const opt = document.createElement('option'); opt.value = d.name; opt.textContent = `${d.name} ‚Äî ${d.specialty} (${d.city}) ‚Äî ${d.phone}`; opt.dataset.email=d.email; sel.appendChild(opt);
      });
    }

    // Appointment confirm for doctors
    function handleAppointmentConfirm(e){
      e.preventDefault();
      const doc = document.getElementById('doctor-select').value;
      const date = document.getElementById('appointment-date').value;
      const time = document.getElementById('appointment-time').value;
      if(!doc||!date||!time){ alert('Choose doctor, date and time'); return; }
      const detail = { doctor:doc, date, time, disease: currentPrediction? currentPrediction.name:'General' };
      localStorage.setItem('mediprompt_appointment', JSON.stringify(detail));
      document.getElementById('appointment-confirm').classList.remove('hidden');
      document.getElementById('appointment-details').textContent = `‚úÖ Booked: ${doc} on ${date} at ${time}.`;
      updateProgress(4);
    }

    function updateProgress(step){
      document.querySelectorAll('.progress-step').forEach((el,idx)=>{
        if(idx < step) { el.classList.add('bg-blue-600','text-white'); el.classList.remove('bg-gray-200','text-gray-600'); }
        else { el.classList.add('bg-gray-200','text-gray-600'); el.classList.remove('bg-blue-600','text-white'); }
      });
    }

    function init(){
      renderSymptomChips(); renderLabList(); renderDoctorsForSpecialty('Any');
      // restore state
      const appt = localStorage.getItem('mediprompt_appointment'); if(appt){ const d=JSON.parse(appt); document.getElementById('appointment-confirm').classList.remove('hidden'); document.getElementById('appointment-details').textContent = `Existing booking: ${d.doctor} on ${d.date} at ${d.time}`; }
      const lastpickup = localStorage.getItem('mediprompt_last_pickup'); if(lastpickup){ document.getElementById('lab-confirm').classList.remove('hidden'); document.getElementById('lab-confirm').textContent = `Last pickup (demo): ${JSON.parse(lastpickup).lab}`; }
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</head>
<body class="bg-gray-50 font-sans">
  <!-- Navbar -->
  <header class="flex justify-between items-center py-4 px-8 bg-white shadow">
    <h1 class="text-2xl font-bold text-blue-600">MediPrompt</h1>
    <nav class="space-x-6">
      <a href="#" class="text-gray-700 hover:text-blue-600">Home</a>
      <a href="#features" class="text-gray-700 hover:text-blue-600">Features</a>
      <a href="#demo" class="text-gray-700 hover:text-blue-600">Live Demo</a>
      <a href="#contact" class="text-gray-700 hover:text-blue-600">Contact</a>
    </nav>
    <button class="border border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white">Login / Sign Up</button>
  </header>

  <!-- Progress Tracker -->
  <section class="bg-gray-100 py-6">
    <div class="max-w-5xl mx-auto grid grid-cols-4 gap-3">
      <div class="progress-step bg-blue-600 text-white text-center py-2 rounded-lg">1. Symptoms</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">2. Tests</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">3. Reports</div>
      <div class="progress-step bg-gray-200 text-gray-600 text-center py-2 rounded-lg">4. Doctor</div>
    </div>
  </section>

  <!-- Hero -->
  <section class="flex flex-col md:flex-row items-center justify-between px-8 py-12 bg-white">
    <div class="max-w-2xl">
      <h2 class="text-4xl font-bold text-gray-900 mb-3">Your AI Health Companion</h2>
      <p class="text-gray-700 mb-6">Tell us your symptoms (separate with commas). We‚Äôll suggest possible conditions, tests, connect you to a lab, and help you book a doctor ‚Äî end to end demo.</p>
      <a href="#demo" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">Try the Live Demo</a>
    </div>
    <img src="https://cdn-icons-png.flaticon.com/512/387/387561.png" alt="Doctor" class="w-64 mt-8 md:mt-0" />
  </section>

  <!-- Features -->
  <section id="features" class="px-8 py-12 bg-gray-50">
    <div class="grid md:grid-cols-4 gap-6 text-center">
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Symptom Checker</h3><p class="text-gray-600 mt-2">Comma-separated input and chip selection.</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Test Suggestions</h3><p class="text-gray-600 mt-2">Contextual tests shown for each condition.</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Pathology Labs</h3><p class="text-gray-600 mt-2">Book tests and sample pickup; lab uploads reports (simulated).</p></div>
      <div class="bg-white shadow rounded-lg p-6"><h3 class="font-bold text-lg text-gray-800">Doctor Booking</h3><p class="text-gray-600 mt-2">Many sample doctors across specialties.</p></div>
    </div>
  </section>

  <!-- Live Demo -->
  <section id="demo" class="px-8 py-12">
    <div class="max-w-5xl mx-auto bg-white rounded-xl shadow p-6 border">
      <h3 class="text-2xl font-semibold text-gray-900 mb-2">1) Enter Symptoms</h3>
      <p class="text-sm text-gray-600 mb-4">Select from common symptoms or type your own, separated by commas (e.g., fever, cough, headache)</p>
      <div id="symptom-chips" class="mb-3"></div>
      <input id="symptoms-free" type="text" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" placeholder="e.g., fever, cough, loss of taste" />
      <div class="mt-4 flex gap-3">
        <button onclick="handleSymptomAnalyze(event)" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700">Analyze Symptoms</button>
        <button onclick="(function(){document.getElementById('symptoms-free').value='fever,cough,shortness of breath'; handleSymptomAnalyze();})()" class="bg-gray-200 px-4 py-2 rounded">Use sample</button>
      </div>
      <div class="mt-4 text-xs text-gray-600 bg-yellow-50 border border-yellow-200 p-3 rounded">‚ö†Ô∏è Educational demo only. Not a diagnostic tool.</div>
    </div>

    <!-- Results -->
    <div id="results" class="max-w-5xl mx-auto mt-8 hidden">
      <div class="grid md:grid-cols-2 gap-6">
        <div class="bg-white rounded-xl shadow p-6 border">
          <h3 class="text-2xl font-semibold text-gray-900 mb-2">2) Predicted Conditions & Suggested Tests</h3>
          <div id="predictions" class="space-y-3"></div>
        </div>

        <!-- Labs -->
        <div id="labs-panel" class="bg-white rounded-xl shadow p-6 border hidden">
          <h3 class="text-2xl font-semibold text-gray-900 mb-2">Book a Pathology Lab</h3>
          <ul id="lab-list" class="mt-2"></ul>
          <p id="lab-confirm" class="hidden text-sm mt-2 text-green-700 bg-green-50 border border-green-200 p-2 rounded"></p>
        </div>
      </div>

      <!-- Reports upload -->
      <div id="reports-panel" class="bg-white rounded-xl shadow p-6 border mt-6 hidden">
        <h3 class="text-2xl font-semibold text-gray-900 mb-2">3) Reports</h3>
        <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
          <input id="report-file" type="file" class="border p-2 rounded" />
          <button onclick="handleReportUpload()" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Upload Report</button>
        </div>
        <p id="report-status" class="hidden text-sm text-indigo-700"></p>
        <div id="reports-list" class="mt-3"></div>

        <div id="report-preview" class="hidden mt-4">
          <h4 class="font-semibold">Report Preview</h4>
          <iframe id="report-preview-iframe" style="width:100%;height:360px;border:1px solid #e5e7eb;border-radius:8px;margin-top:8px"></iframe>
        </div>
      </div>

      <!-- Doctor booking -->
      <div id="doctor-panel" class="bg-white rounded-xl shadow p-6 border mt-6 hidden">
        <h3 class="text-2xl font-semibold text-gray-900 mb-2">4) Book a Doctor</h3>
        <form onsubmit="handleAppointmentConfirm(event)" class="grid md:grid-cols-3 gap-4">
          <div class="md:col-span-3">
            <label class="block text-sm font-semibold mb-1">Doctor (specialty auto‚Äësuggested)</label>
            <select id="doctor-select" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300"></select>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-1">Date</label>
            <input id="appointment-date" type="date" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" />
          </div>
          <div>
            <label class="block text-sm font-semibold mb-1">Time</label>
            <select id="appointment-time" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300"><option value="">-- Choose a time slot --</option><option>09:30 AM</option><option>10:30 AM</option><option>12:00 PM</option><option>02:30 PM</option><option>05:00 PM</option></select>
          </div>
          <div class="md:col-span-3 flex items-end">
            <button type="submit" class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700">Confirm Appointment</button>
          </div>
        </form>
        <div id="appointment-confirm" class="hidden mt-4 bg-green-50 text-green-800 p-3 rounded border border-green-200"><p class="font-semibold">Appointment Confirmed</p><p id="appointment-details"></p></div>
      </div>
    </div>
  </section>

  <!-- Pickup Modal -->
  <div id="pickup-modal" class="hidden fixed inset-0 flex items-center justify-center z-50">
    <div class="modal-backdrop absolute inset-0"></div>
    <div class="relative bg-white rounded-lg shadow-lg z-50 p-6 w-full max-w-md">
      <h4 class="text-lg font-semibold mb-2">Book Sample Pickup ‚Äî <span id="pickup-lab-name"></span></h4>
      <form onsubmit="bookSamplePickup(event)">
        <input id="pickup-lab-id" type="hidden" />
        <label class="block text-sm font-medium">Date</label>
        <input id="pickup-date" type="date" class="w-full p-2 border rounded mb-3" />
        <label class="block text-sm font-medium">Time slot</label>
        <select id="pickup-time" class="w-full p-2 border rounded mb-4"><option value="">-- Choose --</option><option>09:00 AM - 11:00 AM</option><option>11:00 AM - 01:00 PM</option><option>02:00 PM - 04:00 PM</option><option>04:00 PM - 06:00 PM</option></select>
        <div class="flex gap-3 justify-end"><button type="button" onclick="closePickupModal()" class="px-4 py-2 border rounded">Cancel</button><button class="px-4 py-2 bg-green-600 text-white rounded">Confirm Pickup</button></div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-100 py-6 px-8 text-center text-gray-600"> <p>&copy; 2025 MediPrompt (Demo). All rights reserved.</p></footer>
</body>
</html>
